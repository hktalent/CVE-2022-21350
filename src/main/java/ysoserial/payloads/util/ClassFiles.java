package ysoserial.payloads.util;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

class ClassFiles {
   ClassFiles() {
   }

   public static String classAsFile(Class<?> var0) {
      return classAsFile(var0, true);
   }

   public static String classAsFile(Class<?> var0, boolean var1) {
      String var2;
      if (var0.getEnclosingClass() == null) {
         var2 = var0.getName().replace(".", "/");
      } else {
         var2 = classAsFile(var0.getEnclosingClass(), false) + "$" + var0.getSimpleName();
      }

      if (var1) {
         var2 = var2 + ".class";
      }

      return var2;
   }

   public static byte[] classAsBytes(Class<?> var0) {
      try {
         byte[] var1 = new byte[1024];
         String var2 = classAsFile(var0);
         InputStream var3 = ClassFiles.class.getClassLoader().getResourceAsStream(var2);
         if (var3 == null) {
            throw new IOException("couldn't find '" + var2 + "'");
         } else {
            ByteArrayOutputStream var4 = new ByteArrayOutputStream();

            int var5;
            while((var5 = var3.read(var1)) != -1) {
               var4.write(var1, 0, var5);
            }

            return var4.toByteArray();
         }
      } catch (IOException var6) {
         throw new RuntimeException(var6);
      }
   }
}
